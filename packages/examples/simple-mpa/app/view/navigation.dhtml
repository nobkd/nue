
<script>
  import { loadPage } from '/@nue/view-transitions.js'
  import { router } from '/@nue/app-router.js'
  import { setSelected } from './util.js'
  import { model } from '../model/index.js'
</script>

<aside @name="nav-panel">
  <header>
    <h1><img class="logo" src="/app/img/logo.svg"> Big Design Inc.</h1>
  </header>

  <section>

    <search-input/>

    <nav>
      <a data-accesskey="1" href="/app/"><icon key="users"/>All contacts</a>
      <a data-accesskey="2" href="/app/demo_request/"><icon key="demo_request"/>Demo requests</a>
      <a data-accesskey="3" href="/app/question/"><icon key="question"/>Questions</a>
      <a data-accesskey="4" href="/app/problem/"><icon key="problem"/>Problems</a>
      <a data-accesskey="5" href="/app/feedback/"><icon key="feedback"/>Feedback</a>
    </nav>

    <details open>
      <summary>Plans</summary>
      <nav>
        <a href="/app/plan/enterprise" class="plan-enterprise"><icon key="dot"/>Enterprise</a>
        <a href="/app/plan/pro"  class="plan-pro"><icon key="dot"/>Pro</a>
        <a href="/app/plan/free" class="plan-free"><icon key="dot"/>Free</a>
      </nav>
    </details>

    <details open>
      <summary>Company size</summary>
      <nav>
        <a href="/app/size/xl" class="size-xl"><icon key="square"/>Very large</a>
        <a href="/app/size/l"  class="size-l"><icon key="square"/>Large</a>
        <a href="/app/size/m"  class="size-m"><icon key="square"/>Medium</a>
        <a href="/app/size/s"  class="size-s"><icon key="square"/>Small</a>
      </nav>
    </details>
  </section>

  <footer>
    <account>
  </footer>

  <script>
    constructor() {
      router.bind('type filter', (data, { path }) => {
        setSelected(`a[href$="${path}"]`, 'aria-current', 'page')
      })
    }
  </script>
</aside>


<label @name="search-input" class="search" data-accesskey="/">
  <icon key="search"/>
  <input @input="search" :value="value" type="search" placeholder="Search..." :autofocus="value">
  <kbd><strong>âŒ˜</strong></kbd><kbd>K</kbd>

  <script>
    value = router.state.query

    search(e) {
      router.set({ type: 'search', query: e.target.value, start: null })
    }

  </script>
</label>


<div @name="account">
  <a href="#" @click="logout">Logout</a>

  <script>
    logout() {
      model.logout()
      loadPage('/')
    }
  </script>
</div>



