<!doctype html lib>

<header class="ui">
  <nav>
    <a href="/" class="logo"><img src="/img/logo-small.png" width="60" height="27"></a>
    <a href="/docs/">Docs</a>
    <a href="/blog/">Blog</a>
    <a :if="teaser" class="row" href="{ teaser.url }">
      <span class="tag">{ teaser.tag}</span>
      { teaser.text }
    </a>
  </nav>

  <nav>
    <a  href="{ slack.url }" class="row">
      <slack-icon width="18" height="18"/> Slack
    </a>

    <a  href="{ gh.url }" class="row pill">
      <github-icon width="18" height="18"/> { gh.count }
    </a>
  </nav>
</header>

<!-- join mailing list -->
<aside :is="beside" class="ui thin">
  <join-list :join :markdown/>
</aside>

<footer>
  <hr>
  <strong>NUE</strong><span>â€” { tagline }</span>
</footer>


<nav :is="navi" class="stack">
  <a :each="link in links" href="{ link.url }">
    <template :if="!link.desc">{ link.title }</template>
    <div :if="link.desc" class="row">
      <strong>{ link.title }</strong>
      <small>{ link.desc }</small>
    </div>
  </a>

  <script>
    function parseNavEntry(el) {
      if (typeof el == 'string') el = { title: el }
      let { title, slug, desc='' } = el
      if (!slug) slug = title.toLowerCase().replaceAll(' ', '-')
      return { title, url: `/docs/${ slug }`, desc }
    }

    const arr = this.docs[this.items] || []
    this.links = arr.map(parseNavEntry)
  </script>
</nav>